---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import logo from "../../assets/logo.png";
// import { Button } from "./button";

const mobileMenu = false;

const links = [
  { name: "Inicio", href: "#inicio" },
  { name: "Servicios", href: "#servicios" },
  { name: "Nosotros", href: "#nosotros" },
  { name: "Contacto", href: "#contacto" },
];
---

<header
  class="sticky top-0 z-50 w-full border-b backdrop-blur supports-[backdrop-filter]:bg-background/60"
>
  <div class="container max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="animate-fade-in-up flex h-16 items-center justify-between">
      <!-- logo -->

      <a
        href="/"
        class="hover:scale-105 transition-transform duration-200"
      >
        <Image
          src={logo}
          alt="Logo SST360"
          width="60"
        />
      </a>

      <!-- Navegación modo escritorio -->
      <nav class="hidden md:flex items-center space-x-8">
        {
          links.map(({ href, name }) => (
            <div
              class="flex flex-col items-center"
              data-link={href}
            >
              <a
                href={href}
                class="text-foreground hover:text-[#202F58] transition-colors"
              >
                {name}
              </a>
              <div class="border-b-2 border-transparent transition-all duration-300 w-full" />
            </div>
          ))
        }
      </nav>

      <!-- CTA Button -->
      <div class="hidden md:flex gap-4">
        <button
          type="button"
          class="bg-gradient-to-r from-[#0B4791] to-[#69B4BB] hover:from-[#0B4791]/90 hover:to-[#69B4BB]/90 text-accent-foreground text-sm tracking-wide rounded-md px-3.5 py-2 cursor-pointer active:scale-95 transition-transform"
        >
          Solicitar Cotización
        </button>
      </div>

      <!-- Menú móvil React -->
      <div class="md:hidden">
        <button
          id="mobile-menu-button"
          type="button"
          class={`p-2 rounded-lg hover:bg-muted transition-colors`}
          aria-label="Abrir menú"
        >
          <Icon
            name="open-menu"
            size="30"
          />
        </button>

        <button
          id="mobile-menu-close-button"
          type="button"
          class={`p-2 rounded-lg hover:bg-muted transition-colors hidden`}
          aria-label="Cerrar menú"
        >
          <Icon
            name="close-menu"
            size="30"
          />
        </button>
      </div>
    </div>
  </div>

  <div
    id="mobile-menu"
    class={`md:hidden overflow-hidden transition-all duration-300 ease-in-out ${mobileMenu ? "max-h-96 opacity-100" : "max-h-0 opacity-0"}`}
  >
    <div class="py-4 border-t">
      <nav class="flex flex-col space-y-4 px-4 text-base">
        <!-- <a
          href="#inicio"
          class="text-foreground font-sans hover:text-[#202F58] transition-all transform hover:translate-x-2 duration-200"
        >
          Inicio
        </a> -->
        <a
          href="#servicios"
          class="text-foreground hover:text-[#202F58] transition-all transform hover:translate-x-2 duration-200"
        >
          Servicios
        </a>
        <a
          href="#nosotros"
          class="text-foreground hover:text-[#202F58] transition-all transform hover:translate-x-2 duration-200"
        >
          Nosotros
        </a>
        <a
          href="#contacto"
          class="text-foreground hover:text-[#202F58] transition-all transform hover:translate-x-2 duration-200"
        >
          Contacto
        </a>
        <!-- <Button
          className="bg-blue-600 hover:bg-blue/90 text-primary-foreground font-medium w-full mt-4"
        >
          Solicitar Cotización
        </Button> -->

        <button
          type="button"
          class="bg-gradient-to-r from-[#0B4791] to-[#69B4BB] hover:from-[#0B4791]/90 hover:to-[#69B4BB]/90 text-accent-foreground text-sm tracking-wide rounded-md px-3.5 py-3 cursor-pointer active:scale-95 transition-transform"
        >
          Solicitar Cotización
        </button>
      </nav>
    </div>
  </div>
</header>

<script>
  const buttonCloseMenu = document.getElementById("mobile-menu-close-button");
  const buttonOpenMenu = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");

  let isMenuOpen = false;

  const setIsMenuOpen = () => {
    isMenuOpen = !isMenuOpen;
    if (isMenuOpen) {
      buttonCloseMenu?.classList.remove("hidden");
      buttonOpenMenu?.classList.add("hidden");
      mobileMenu?.classList.remove("max-h-0", "opacity-0");
      mobileMenu?.classList.add("max-h-96", "opacity-100");
    } else {
      buttonCloseMenu?.classList.add("hidden");
      buttonOpenMenu?.classList.remove("hidden");
      mobileMenu?.classList.remove("max-h-96", "opacity-100");
      mobileMenu?.classList.add("max-h-0", "opacity-0");
    }
  };

  buttonCloseMenu?.addEventListener("click", () => {
    setIsMenuOpen();
  });

  buttonOpenMenu?.addEventListener("click", () => {
    setIsMenuOpen();
  });
</script>
